(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/stepRouter/controller/stepRouter.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/stepRouter/constants/errorMessage.ts":
/*!**************************************************!*\
  !*** ./src/stepRouter/constants/errorMessage.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ErrorMessage = {\n    stepRouter_config_undefined: \"[Step Router]: Step Router cannot be instantiated becuase required configuration is missing (stepRouterAnchorId and stepRouterCtx).\",\n    stepRouter_config_anchorIdNotFound: \"[Step Router]: cannot configure Step Router becuase required property 'stepRouterAnchorId' is missing.\",\n    stepRouter_config_ctxPropMissing: \"[Step Router]: cannot configure Step Router becuase required property 'stepRouterCtx' is missing.\",\n    stepRouter_anchor_wizardElementNotFound: \"[Step Router]: cannot configure Step Router becuase specified Step Router anchor id '{{wizardAnchorId}}' is not found in the DOM.\",\n    step_register_noneRegistered: \"It's lonley here, there are not no steps registered.\",\n    step_register_stepIdMissing: \"[Step]: cannot register step because required property 'id' is missing\",\n    step_register_duplicateId: \"[Step]: '{{stepId}}' cannot be registered because it's registered already.  Step 'id' must be unique.\",\n    step_register_controllerdMissing: \"[Step]: cannot register step because required property 'controller' is either missing or defined as string\",\n    step_register_stepViewMissing: \"[Step]: cannot register step because required property 'viewCallback' is missing\",\n    step_find_notFound: \"[Step]: unable to find step identified as '{{stepId}}'\",\n    step_view_notFound: \"[Step]: unable to fetch step view (HTML) because '{{stepId}}' step is undefined\",\n    step_view_callbackNotFunction: \"[Step]: unable to fetch step view (HTML) because '{{stepId}}' view callback is Not a function\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RlcFJvdXRlci9jb25zdGFudHMvZXJyb3JNZXNzYWdlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3N0ZXBSb3V0ZXIvY29uc3RhbnRzL2Vycm9yTWVzc2FnZS50cz85OTE1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBFcnJvck1lc3NhZ2UgPSB7XG4gIHN0ZXBSb3V0ZXJfY29uZmlnX3VuZGVmaW5lZDogXCJbU3RlcCBSb3V0ZXJdOiBTdGVwIFJvdXRlciBjYW5ub3QgYmUgaW5zdGFudGlhdGVkIGJlY3Vhc2UgcmVxdWlyZWQgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nIChzdGVwUm91dGVyQW5jaG9ySWQgYW5kIHN0ZXBSb3V0ZXJDdHgpLlwiLFxuICBzdGVwUm91dGVyX2NvbmZpZ19hbmNob3JJZE5vdEZvdW5kOiBcIltTdGVwIFJvdXRlcl06IGNhbm5vdCBjb25maWd1cmUgU3RlcCBSb3V0ZXIgYmVjdWFzZSByZXF1aXJlZCBwcm9wZXJ0eSAnc3RlcFJvdXRlckFuY2hvcklkJyBpcyBtaXNzaW5nLlwiLFxuICBzdGVwUm91dGVyX2NvbmZpZ19jdHhQcm9wTWlzc2luZzogXCJbU3RlcCBSb3V0ZXJdOiBjYW5ub3QgY29uZmlndXJlIFN0ZXAgUm91dGVyIGJlY3Vhc2UgcmVxdWlyZWQgcHJvcGVydHkgJ3N0ZXBSb3V0ZXJDdHgnIGlzIG1pc3NpbmcuXCIsXG4gIHN0ZXBSb3V0ZXJfYW5jaG9yX3dpemFyZEVsZW1lbnROb3RGb3VuZDogXCJbU3RlcCBSb3V0ZXJdOiBjYW5ub3QgY29uZmlndXJlIFN0ZXAgUm91dGVyIGJlY3Vhc2Ugc3BlY2lmaWVkIFN0ZXAgUm91dGVyIGFuY2hvciBpZCAne3t3aXphcmRBbmNob3JJZH19JyBpcyBub3QgZm91bmQgaW4gdGhlIERPTS5cIixcbiAgc3RlcF9yZWdpc3Rlcl9ub25lUmVnaXN0ZXJlZDogXCJJdCdzIGxvbmxleSBoZXJlLCB0aGVyZSBhcmUgbm90IG5vIHN0ZXBzIHJlZ2lzdGVyZWQuXCIsXG4gIHN0ZXBfcmVnaXN0ZXJfc3RlcElkTWlzc2luZyA6IFwiW1N0ZXBdOiBjYW5ub3QgcmVnaXN0ZXIgc3RlcCBiZWNhdXNlIHJlcXVpcmVkIHByb3BlcnR5ICdpZCcgaXMgbWlzc2luZ1wiLFxuICBzdGVwX3JlZ2lzdGVyX2R1cGxpY2F0ZUlkIDogXCJbU3RlcF06ICd7e3N0ZXBJZH19JyBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBiZWNhdXNlIGl0J3MgcmVnaXN0ZXJlZCBhbHJlYWR5LiAgU3RlcCAnaWQnIG11c3QgYmUgdW5pcXVlLlwiLFxuICBzdGVwX3JlZ2lzdGVyX2NvbnRyb2xsZXJkTWlzc2luZyA6IFwiW1N0ZXBdOiBjYW5ub3QgcmVnaXN0ZXIgc3RlcCBiZWNhdXNlIHJlcXVpcmVkIHByb3BlcnR5ICdjb250cm9sbGVyJyBpcyBlaXRoZXIgbWlzc2luZyBvciBkZWZpbmVkIGFzIHN0cmluZ1wiLFxuICBzdGVwX3JlZ2lzdGVyX3N0ZXBWaWV3TWlzc2luZyA6IFwiW1N0ZXBdOiBjYW5ub3QgcmVnaXN0ZXIgc3RlcCBiZWNhdXNlIHJlcXVpcmVkIHByb3BlcnR5ICd2aWV3Q2FsbGJhY2snIGlzIG1pc3NpbmdcIixcbiAgc3RlcF9maW5kX25vdEZvdW5kIDogXCJbU3RlcF06IHVuYWJsZSB0byBmaW5kIHN0ZXAgaWRlbnRpZmllZCBhcyAne3tzdGVwSWR9fSdcIixcbiAgc3RlcF92aWV3X25vdEZvdW5kIDogXCJbU3RlcF06IHVuYWJsZSB0byBmZXRjaCBzdGVwIHZpZXcgKEhUTUwpIGJlY2F1c2UgJ3t7c3RlcElkfX0nIHN0ZXAgaXMgdW5kZWZpbmVkXCIsXG4gIHN0ZXBfdmlld19jYWxsYmFja05vdEZ1bmN0aW9uIDogXCJbU3RlcF06IHVuYWJsZSB0byBmZXRjaCBzdGVwIHZpZXcgKEhUTUwpIGJlY2F1c2UgJ3t7c3RlcElkfX0nIHZpZXcgY2FsbGJhY2sgaXMgTm90IGEgZnVuY3Rpb25cIlxufVxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/stepRouter/constants/errorMessage.ts\n");

/***/ }),

/***/ "./src/stepRouter/controller/stepRouter.ts":
/*!*************************************************!*\
  !*** ./src/stepRouter/controller/stepRouter.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst transitionType_1 = __webpack_require__(/*! ../enums/transitionType */ \"./src/stepRouter/enums/transitionType.ts\");\nconst stepRouterService_1 = __webpack_require__(/*! ../services/stepRouterService */ \"./src/stepRouter/services/stepRouterService.ts\");\nconst errorMessage_1 = __webpack_require__(/*! ../constants/errorMessage */ \"./src/stepRouter/constants/errorMessage.ts\");\n/**\n * This is responsible for all the primary UI and interaction activities related to step orchestration\n */\nclass StepRouter {\n    constructor(_stepRouterConfig) {\n        // minimal style used internally to show errors, loading progress, last step reached animation\n        this.stepRouterMasterStyle = `<style>\n    .error-wrapper {\n      position: absolute;\n      z-index: ;\n      top: 1;\n      bottom: 0;\n      background-color: #B00020;\n      color: #fff;\n      width: 100%;\n      border-radius: 5px\n      z-index: 1;\n      display: none;\n    }\n\n    .loading .step-wrapper {\n      display: none;\n    }\n\n    .error-wrapper .message {\n      padding: 10px 10px;\n      white-space: normal;\n      word-break: break-word;\n      flex: 1 auto;\n    }\n    .error-wrapper .clear {\n      height: 40px;\n      width: 40px;\n      border-radius: 50%;\n      margin-right: 5px;\n    }\n\n    .show-error .error-wrapper {\n      display: flex;\n      align-items: center;\n    }\n\n    .loading .step-loader {\n      border: 8px solid #f3f3f3;\n      border-top: 8px solid #3498db;\n      border-radius: 50%;\n      width: 40px;\n      height: 40px;\n      animation: stepLoaderAnimation 2s linear infinite;\n    }\n    @keyframes stepLoaderAnimation {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n\n    .last-step {\n      animation: stepNotFoundAnimation 0.2s 1;\n    }\n\n    @keyframes stepNotFoundAnimation {\n      0% { transform: translate(1px, 1px) rotate(0deg); }\n      10% { transform: translate(-1px, -2px) rotate(-1deg); }\n      20% { transform: translate(-3px, 0px) rotate(1deg); }\n      30% { transform: translate(3px, 2px) rotate(0deg); }\n      40% { transform: translate(1px, -1px) rotate(1deg); }\n      50% { transform: translate(-1px, 2px) rotate(-1deg); }\n      60% { transform: translate(-3px, 1px) rotate(0deg); }\n      70% { transform: translate(3px, 1px) rotate(-1deg); }\n      80% { transform: translate(-1px, -1px) rotate(1deg); }\n      90% { transform: translate(1px, 2px) rotate(0deg); }\n      100% { transform: translate(1px, -2px) rotate(-1deg); }\n  }\n  </style>`;\n        this.stepRouterMasterTemplate = `{{stepRouterMasterStyle}}\n    <div class=\"step-router-wrapper\">\n      <div class=\"step-loader\"></div>\n      <div class=\"error-wrapper\">\n        <div class=\"message\"><!-- Error message injected here--></div>\n        <button class=\"clear\">clear</button><!-- note: click event would be automatically bound upon wizard initialization -->\n      </div>\n      <div class=\"step-wrapper\"><!-- Step content will be injected here --></div>\n    </div>`;\n        // Element attribute names (id/class)\n        this.loadingClassName = \"loading\";\n        this.showErrorClassName = \"show-error\";\n        this.stepRouterWrapperClassName = \"step-router-wrapper\";\n        this.stepWrapperClassName = \"step-wrapper\";\n        this.errorMessageClassName = \"message\";\n        this.clearErrorMessageClassName = \"clear\";\n        this.lastStepClassName = \"last-step\";\n        //private steps: Array<StepInfo>;\n        this.stepRouterAnchorElement = null; // Where step router content is anchored (inject into the DOM)\n        this.stepRouterWrapperElement = null; // Reference to the step router container element inside the anchor\n        this.stepWrapperElement = null; // Reference to the step content container element where each step's content would be injected\n        this.errorMsgElement = null; // Reference to the error message element where error messages would be injected\n        this._stepRouterService = {};\n        this.stepRouterConfig = {};\n        // Each step loaded will need to have the correct Step Router context attached to it\n        // Upon loading a step, we use this expression to replace token placeholder with correct context\n        this.stepViewBindingReplacement = new RegExp(\"stepRouterCtx\", \"gi\");\n        // Represents the step currently being shown\n        this.currentStep = {};\n        // Ensure the config has provided all the required information\n        const isStepRouterConfigValid = this.validateStepRouterConfig(_stepRouterConfig);\n        if (!isStepRouterConfigValid) {\n            return;\n        }\n        this.stepRouterConfig = _stepRouterConfig;\n        // Internal service singleton\n        // note: DI would be better way to do this but no system in place for DI\n        this._stepRouterService = new stepRouterService_1.StepRouterService();\n    }\n    /**\n     * Loads the step wizard's core html structure into the DOM and\n     * save references to step wizard's DOM elements for subsequent updates\n     */\n    start() {\n        try {\n            this.setupStepRouterInternals();\n            if (this._stepRouterService.steps.length === 0) {\n                this.stepRouterAnchorElement.innerHTML = errorMessage_1.ErrorMessage.step_register_noneRegistered;\n            }\n            // Step content orchestration\n            const stepId = this._stepRouterService.steps.length > 0 ? this._stepRouterService.steps[0].id : \"\";\n            const step = this._stepRouterService.findStep(stepId);\n            this.transitionStep(step);\n            this.bindInternalClickEvents();\n        }\n        catch (ex) {\n            this.handleError(ex);\n        }\n    }\n    /**\n     * Click events for wizard internal usage (nothing to do with any of the steps)\n     */\n    bindInternalClickEvents() {\n        // Clear error message event\n        let clearErrorMsgElement = this.stepRouterWrapperElement.getElementsByClassName(this.clearErrorMessageClassName);\n        if (clearErrorMsgElement[0]) {\n            clearErrorMsgElement[0].addEventListener(\"click\", this.clearErrorMessage.bind(this));\n        }\n    }\n    /**\n     * Prevent UI interaction\n     */\n    blockUI() {\n        this.stepRouterWrapperElement.classList.add(this.loadingClassName);\n    }\n    /**\n     * Allow UI interaction; undo what block UI does\n     */\n    unblockUI() {\n        this.stepRouterWrapperElement.classList.remove(this.loadingClassName);\n    }\n    handleError(error) {\n        this.showErrorMessage(error);\n    }\n    /**\n     * Visual queue that last step is reached.\n     * Note: first step and last step are both treated as end of road\n     */\n    handleEndOfRoad() {\n        this.stepRouterWrapperElement.classList.add(this.lastStepClassName);\n        setTimeout(() => {\n            this.stepRouterWrapperElement.classList.remove(this.lastStepClassName);\n        }, 500);\n    }\n    showErrorMessage(error) {\n        if (this.errorMsgElement) {\n            this.errorMsgElement.innerHTML = `Sorry, an error has occured: ${error.message}`;\n            this.stepRouterWrapperElement.classList.add(this.showErrorClassName);\n        }\n        else {\n            console.error(\"[Step Router]: sorry, an error has occured\" + error.message);\n        }\n    }\n    clearErrorMessage() {\n        this.stepRouterWrapperElement.classList.remove(this.showErrorClassName);\n        this.errorMsgElement.innerHTML = \"\";\n    }\n    /**\n     * Performs step registration\n     * @param stepConfig configuration describing step information to register\n     */\n    registerStep(stepConfig) {\n        let promise = new Promise((resolve, reject) => {\n            let response = {\n                isRegistered: true,\n                error: new Error()\n            };\n            try {\n                // Ensure step registration pre-requisites are met\n                this.validateStepRegistrationConfig(stepConfig);\n                // Prepare step registration\n                const newStep = {\n                    id: stepConfig.id,\n                    controller: stepConfig.controller,\n                    ctrlInstance: null,\n                    callback: stepConfig.callback,\n                    data: stepConfig\n                };\n                // Register the step\n                this._stepRouterService.addStep(newStep);\n                resolve(response);\n            }\n            catch (ex) {\n                response.isRegistered = false;\n                response.error = ex;\n                this.handleError(ex);\n                reject(response);\n            }\n        });\n        return promise;\n    }\n    /**\n     * Display the UI for the step\n     * @param stepContent Step's UI (HTML)\n     */\n    loadStepView(stepContent) {\n        this.stepWrapperElement.innerHTML = stepContent;\n    }\n    /**\n     * Helps navigate the user to the destination step\n     * @param destinationStep Destination step\n     */\n    transitionStep(destinationStep) {\n        // Load step controller\n        destinationStep.ctrlInstance = this.getStepCtx(destinationStep);\n        // Update current step context\n        this.currentStep = destinationStep;\n        // Load destination step view (UI)\n        this._stepRouterService.getStepView(destinationStep)\n            .then((result) => {\n            // For transition actions requested in the step's UI, bind it to the proper wizard context\n            result = result.replace(this.stepViewBindingReplacement, `${this.stepRouterConfig.stepRouterCtx}`);\n            this.loadStepView(result);\n        })\n            .catch((result) => {\n            this.loadStepView(result);\n        });\n    }\n    next() {\n        this.blockUI();\n        const stepNextCallback = this.currentStep.ctrlInstance[this.currentStep.callback.nextAsync]();\n        // Once current step is done with it's operations then transition to the next step\n        stepNextCallback\n            .then((result) => {\n            // Determine the next step\n            const destinationStep = this._stepRouterService.findStep(this.currentStep.id, transitionType_1.TransitionType.Next);\n            // Temp last step handler\n            // ToDo: Add more reporting around last/first step and enable/disable transition buttons\n            if (!destinationStep) {\n                this.handleEndOfRoad();\n            }\n            else {\n                this.transitionStep(destinationStep);\n            }\n        })\n            .catch((result) => {\n            this.loadStepView(result);\n        })\n            .finally(() => {\n            this.unblockUI();\n        });\n    }\n    previous() {\n        this.blockUI();\n        const stepPreviousCallback = this.currentStep.ctrlInstance[this.currentStep.callback.previousAsync]();\n        // Once current step is done with it's operations then transition to the next step\n        stepPreviousCallback\n            .then((result) => {\n            // Determine the previous step\n            const destinationStep = this._stepRouterService.findStep(this.currentStep.id, transitionType_1.TransitionType.Previous);\n            // Temp last step handler\n            // ToDo: Add more reporting around last/first step and enable/disable transition buttons\n            if (!destinationStep) {\n                this.handleEndOfRoad();\n            }\n            else {\n                this.transitionStep(destinationStep);\n            }\n        })\n            .catch((result) => {\n            this.loadStepView(result);\n        })\n            .finally(() => {\n            this.unblockUI();\n        });\n    }\n    skip() {\n        this.blockUI();\n        const stepSkipCallback = this.currentStep.ctrlInstance[this.currentStep.callback.skipAsync]();\n        // Once current step is done with it's operations then transition to the next step\n        stepSkipCallback\n            .then((result) => {\n            // Determine the next step\n            const destinationStep = this._stepRouterService.findStep(this.currentStep.id, transitionType_1.TransitionType.Skip);\n            // Temp last step handler\n            // ToDo: Add more reporting around last/first step and enable/disable transition buttons\n            if (!destinationStep) {\n                this.handleEndOfRoad();\n            }\n            else {\n                this.transitionStep(destinationStep);\n            }\n        })\n            .catch((result) => {\n            this.loadStepView(result);\n        })\n            .finally(() => {\n            this.unblockUI();\n        });\n    }\n    // Helpers\n    /**\n     * Compose step router UI and get hold of other elements for later use\n     */\n    setupStepRouterInternals() {\n        // Lookup the anchor point\n        this.stepRouterAnchorElement = document.getElementById(this.stepRouterConfig.stepRouterAnchorId);\n        if (!this.stepRouterAnchorElement) {\n            throw new Error(errorMessage_1.ErrorMessage.stepRouter_anchor_wizardElementNotFound.replace(\"\", this.stepRouterConfig.stepRouterAnchorId));\n        }\n        // Compose step wizard initial Html structure\n        let stepRouterHtml = this.stepRouterMasterTemplate.replace(\"{{stepRouterMasterStyle}}\", this.stepRouterMasterStyle);\n        // Inject step wizard Html structure into the anchor\n        this.stepRouterAnchorElement.innerHTML = stepRouterHtml;\n        // Save reference to proper inner anchors for future manipulation\n        this.stepRouterWrapperElement = this.stepRouterAnchorElement.getElementsByClassName(this.stepRouterWrapperClassName)[0];\n        this.stepWrapperElement = this.stepRouterAnchorElement.getElementsByClassName(this.stepWrapperClassName)[0];\n        this.errorMsgElement = this.stepRouterAnchorElement.getElementsByClassName(this.errorMessageClassName)[0];\n    }\n    /**\n     * Set of rules to satisfy to ensure wizard can work correctly\n     * @param routerConfig step wizard's core settings\n     */\n    validateStepRouterConfig(routerConfig) {\n        // note: Since we can't rely on presence of an anchorId at this stage; therefore,\n        // console window seems like reasonable alternative to show an errors versus crashing the page\n        let response = true;\n        // Rule #0: ensure wizard config is provided\n        if (!routerConfig) {\n            response = false;\n            console.error(errorMessage_1.ErrorMessage.stepRouter_config_undefined);\n            return response;\n        }\n        // Rule #1: ensure we have the DOM anchor where we will be injecting the UI\n        if (!routerConfig.stepRouterAnchorId || routerConfig.stepRouterAnchorId.length === 0) {\n            response = false;\n            console.error(errorMessage_1.ErrorMessage.stepRouter_config_anchorIdNotFound);\n            return response;\n        }\n        // Rule #2: ensure we've the context holding reference to this wizard's instance\n        if (!routerConfig.stepRouterCtx || routerConfig.stepRouterCtx.length === 0) {\n            response = false;\n            console.error(errorMessage_1.ErrorMessage.stepRouter_config_ctxPropMissing);\n            return response;\n        }\n        return response;\n    }\n    /**\n     * Set of rules to satisfy to ensure wizard can perform it's activities\n     * @param stepConfig information about the step to register\n     */\n    validateStepRegistrationConfig(stepConfig) {\n        // Rule #1: ensure primary key for the step is provided\n        if (!stepConfig.id || stepConfig.id.length === 0) {\n            throw new Error(errorMessage_1.ErrorMessage.step_register_stepIdMissing);\n        }\n        // Rule #2: ensure 'id' is unique (hasn't been registered already)\n        const step = this._stepRouterService.steps.filter(e => e.id === stepConfig.id);\n        if (step.length !== 0) {\n            throw new Error(errorMessage_1.ErrorMessage.step_register_duplicateId.replace(\"{{stepId}}\", stepConfig.id));\n        }\n        // Rule #3: ensure step's controller has been provided\n        if (!stepConfig.controller || typeof (stepConfig.controller) === \"string\") {\n            throw new Error(errorMessage_1.ErrorMessage.step_register_controllerdMissing);\n        }\n        // Rule #4: ensure step's view is available\n        if (!stepConfig.callback.viewAsync) {\n            throw new Error(errorMessage_1.ErrorMessage.step_register_stepViewMissing);\n        }\n        return true;\n    }\n    /**\n    * Get or create context for the specified step\n    * @param step Step whose context to get/create\n    */\n    getStepCtx(step) {\n        let response;\n        if (step.ctrlInstance) {\n            response = step.ctrlInstance;\n        }\n        else {\n            response = new step.controller();\n        }\n        return response;\n    }\n}\nexports.StepRouter = StepRouter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RlcFJvdXRlci9jb250cm9sbGVyL3N0ZXBSb3V0ZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3RlcFJvdXRlci9jb250cm9sbGVyL3N0ZXBSb3V0ZXIudHM/YzM4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IFN0ZXBJbmZvIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zdGVwSW5mbyc7XG5pbXBvcnQgeyBTdGVwUm91dGVyQ29uZmlnIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zdGVwUm91dGVyQ29uZmlnJztcbmltcG9ydCB7IFJlZ2lzdHJhdGlvblJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zdGVwUmVnaXN0ZXJSZXNwb25zZSc7XG5cbmltcG9ydCB7IFRyYW5zaXRpb25UeXBlIH0gZnJvbSAnLi4vZW51bXMvdHJhbnNpdGlvblR5cGUnO1xuXG5pbXBvcnQgeyBTdGVwUm91dGVyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3N0ZXBSb3V0ZXJTZXJ2aWNlJztcblxuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSAnLi4vY29uc3RhbnRzL2Vycm9yTWVzc2FnZSc7XG5cbi8qKlxuICogVGhpcyBpcyByZXNwb25zaWJsZSBmb3IgYWxsIHRoZSBwcmltYXJ5IFVJIGFuZCBpbnRlcmFjdGlvbiBhY3Rpdml0aWVzIHJlbGF0ZWQgdG8gc3RlcCBvcmNoZXN0cmF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGVwUm91dGVyIHtcblxuICAvLyBtaW5pbWFsIHN0eWxlIHVzZWQgaW50ZXJuYWxseSB0byBzaG93IGVycm9ycywgbG9hZGluZyBwcm9ncmVzcywgbGFzdCBzdGVwIHJlYWNoZWQgYW5pbWF0aW9uXG4gIHByaXZhdGUgc3RlcFJvdXRlck1hc3RlclN0eWxlOiBzdHJpbmcgPVxuICAgIGA8c3R5bGU+XG4gICAgLmVycm9yLXdyYXBwZXIge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgei1pbmRleDogO1xuICAgICAgdG9wOiAxO1xuICAgICAgYm90dG9tOiAwO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0IwMDAyMDtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHhcbiAgICAgIHotaW5kZXg6IDE7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgIC5sb2FkaW5nIC5zdGVwLXdyYXBwZXIge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG5cbiAgICAuZXJyb3Itd3JhcHBlciAubWVzc2FnZSB7XG4gICAgICBwYWRkaW5nOiAxMHB4IDEwcHg7XG4gICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgIGZsZXg6IDEgYXV0bztcbiAgICB9XG4gICAgLmVycm9yLXdyYXBwZXIgLmNsZWFyIHtcbiAgICAgIGhlaWdodDogNDBweDtcbiAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgfVxuXG4gICAgLnNob3ctZXJyb3IgLmVycm9yLXdyYXBwZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmxvYWRpbmcgLnN0ZXAtbG9hZGVyIHtcbiAgICAgIGJvcmRlcjogOHB4IHNvbGlkICNmM2YzZjM7XG4gICAgICBib3JkZXItdG9wOiA4cHggc29saWQgIzM0OThkYjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgYW5pbWF0aW9uOiBzdGVwTG9hZGVyQW5pbWF0aW9uIDJzIGxpbmVhciBpbmZpbml0ZTtcbiAgICB9XG4gICAgQGtleWZyYW1lcyBzdGVwTG9hZGVyQW5pbWF0aW9uIHtcbiAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgfVxuXG4gICAgLmxhc3Qtc3RlcCB7XG4gICAgICBhbmltYXRpb246IHN0ZXBOb3RGb3VuZEFuaW1hdGlvbiAwLjJzIDE7XG4gICAgfVxuXG4gICAgQGtleWZyYW1lcyBzdGVwTm90Rm91bmRBbmltYXRpb24ge1xuICAgICAgMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgxcHgsIDFweCkgcm90YXRlKDBkZWcpOyB9XG4gICAgICAxMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMXB4LCAtMnB4KSByb3RhdGUoLTFkZWcpOyB9XG4gICAgICAyMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtM3B4LCAwcHgpIHJvdGF0ZSgxZGVnKTsgfVxuICAgICAgMzAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoM3B4LCAycHgpIHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgNDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMXB4LCAtMXB4KSByb3RhdGUoMWRlZyk7IH1cbiAgICAgIDUwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC0xcHgsIDJweCkgcm90YXRlKC0xZGVnKTsgfVxuICAgICAgNjAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTNweCwgMXB4KSByb3RhdGUoMGRlZyk7IH1cbiAgICAgIDcwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDNweCwgMXB4KSByb3RhdGUoLTFkZWcpOyB9XG4gICAgICA4MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMXB4LCAtMXB4KSByb3RhdGUoMWRlZyk7IH1cbiAgICAgIDkwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDFweCwgMnB4KSByb3RhdGUoMGRlZyk7IH1cbiAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgxcHgsIC0ycHgpIHJvdGF0ZSgtMWRlZyk7IH1cbiAgfVxuICA8L3N0eWxlPmA7XG5cbiAgcHJpdmF0ZSBzdGVwUm91dGVyTWFzdGVyVGVtcGxhdGU6IHN0cmluZyA9XG4gICAgYHt7c3RlcFJvdXRlck1hc3RlclN0eWxlfX1cbiAgICA8ZGl2IGNsYXNzPVwic3RlcC1yb3V0ZXItd3JhcHBlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInN0ZXAtbG9hZGVyXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZXJyb3Itd3JhcHBlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZVwiPjwhLS0gRXJyb3IgbWVzc2FnZSBpbmplY3RlZCBoZXJlLS0+PC9kaXY+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJjbGVhclwiPmNsZWFyPC9idXR0b24+PCEtLSBub3RlOiBjbGljayBldmVudCB3b3VsZCBiZSBhdXRvbWF0aWNhbGx5IGJvdW5kIHVwb24gd2l6YXJkIGluaXRpYWxpemF0aW9uIC0tPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwic3RlcC13cmFwcGVyXCI+PCEtLSBTdGVwIGNvbnRlbnQgd2lsbCBiZSBpbmplY3RlZCBoZXJlIC0tPjwvZGl2PlxuICAgIDwvZGl2PmA7XG5cblxuICAvLyBFbGVtZW50IGF0dHJpYnV0ZSBuYW1lcyAoaWQvY2xhc3MpXG4gIHByaXZhdGUgbG9hZGluZ0NsYXNzTmFtZSA9IFwibG9hZGluZ1wiO1xuICBwcml2YXRlIHNob3dFcnJvckNsYXNzTmFtZSA9IFwic2hvdy1lcnJvclwiO1xuICBwcml2YXRlIHN0ZXBSb3V0ZXJXcmFwcGVyQ2xhc3NOYW1lID0gXCJzdGVwLXJvdXRlci13cmFwcGVyXCI7XG4gIHByaXZhdGUgc3RlcFdyYXBwZXJDbGFzc05hbWUgPSBcInN0ZXAtd3JhcHBlclwiO1xuICBwcml2YXRlIGVycm9yTWVzc2FnZUNsYXNzTmFtZSA9IFwibWVzc2FnZVwiO1xuICBwcml2YXRlIGNsZWFyRXJyb3JNZXNzYWdlQ2xhc3NOYW1lID0gXCJjbGVhclwiO1xuICBwcml2YXRlIGxhc3RTdGVwQ2xhc3NOYW1lID0gXCJsYXN0LXN0ZXBcIjtcblxuICAvL3ByaXZhdGUgc3RlcHM6IEFycmF5PFN0ZXBJbmZvPjtcbiAgcHJpdmF0ZSBzdGVwUm91dGVyQW5jaG9yRWxlbWVudDogYW55ID0gbnVsbDsgLy8gV2hlcmUgc3RlcCByb3V0ZXIgY29udGVudCBpcyBhbmNob3JlZCAoaW5qZWN0IGludG8gdGhlIERPTSlcbiAgcHJpdmF0ZSBzdGVwUm91dGVyV3JhcHBlckVsZW1lbnQ6IGFueSA9IG51bGw7IC8vIFJlZmVyZW5jZSB0byB0aGUgc3RlcCByb3V0ZXIgY29udGFpbmVyIGVsZW1lbnQgaW5zaWRlIHRoZSBhbmNob3JcbiAgcHJpdmF0ZSBzdGVwV3JhcHBlckVsZW1lbnQ6IGFueSA9IG51bGw7IC8vIFJlZmVyZW5jZSB0byB0aGUgc3RlcCBjb250ZW50IGNvbnRhaW5lciBlbGVtZW50IHdoZXJlIGVhY2ggc3RlcCdzIGNvbnRlbnQgd291bGQgYmUgaW5qZWN0ZWRcbiAgcHJpdmF0ZSBlcnJvck1zZ0VsZW1lbnQ6IGFueSA9IG51bGw7IC8vIFJlZmVyZW5jZSB0byB0aGUgZXJyb3IgbWVzc2FnZSBlbGVtZW50IHdoZXJlIGVycm9yIG1lc3NhZ2VzIHdvdWxkIGJlIGluamVjdGVkXG5cblxuICBwcml2YXRlIF9zdGVwUm91dGVyU2VydmljZTogU3RlcFJvdXRlclNlcnZpY2UgPSB7fSBhcyBTdGVwUm91dGVyU2VydmljZTtcbiAgcHJpdmF0ZSBzdGVwUm91dGVyQ29uZmlnOiBTdGVwUm91dGVyQ29uZmlnID0ge30gYXMgU3RlcFJvdXRlckNvbmZpZztcblxuXG4gIC8vIEVhY2ggc3RlcCBsb2FkZWQgd2lsbCBuZWVkIHRvIGhhdmUgdGhlIGNvcnJlY3QgU3RlcCBSb3V0ZXIgY29udGV4dCBhdHRhY2hlZCB0byBpdFxuICAvLyBVcG9uIGxvYWRpbmcgYSBzdGVwLCB3ZSB1c2UgdGhpcyBleHByZXNzaW9uIHRvIHJlcGxhY2UgdG9rZW4gcGxhY2Vob2xkZXIgd2l0aCBjb3JyZWN0IGNvbnRleHRcbiAgcHJpdmF0ZSBzdGVwVmlld0JpbmRpbmdSZXBsYWNlbWVudCA9IG5ldyBSZWdFeHAoXCJzdGVwUm91dGVyQ3R4XCIsIFwiZ2lcIik7XG5cbiAgLy8gUmVwcmVzZW50cyB0aGUgc3RlcCBjdXJyZW50bHkgYmVpbmcgc2hvd25cbiAgcHJpdmF0ZSBjdXJyZW50U3RlcDogU3RlcEluZm8gPSB7fSBhcyBTdGVwSW5mbztcblxuICBjb25zdHJ1Y3Rvcihfc3RlcFJvdXRlckNvbmZpZzogU3RlcFJvdXRlckNvbmZpZykge1xuXG4gICAgICAvLyBFbnN1cmUgdGhlIGNvbmZpZyBoYXMgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBpbmZvcm1hdGlvblxuICAgICAgY29uc3QgaXNTdGVwUm91dGVyQ29uZmlnVmFsaWQgPSB0aGlzLnZhbGlkYXRlU3RlcFJvdXRlckNvbmZpZyhfc3RlcFJvdXRlckNvbmZpZyk7XG4gICAgICBpZighaXNTdGVwUm91dGVyQ29uZmlnVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0ZXBSb3V0ZXJDb25maWcgPSBfc3RlcFJvdXRlckNvbmZpZztcblxuICAgICAgIC8vIEludGVybmFsIHNlcnZpY2Ugc2luZ2xldG9uXG4gICAgICAgLy8gbm90ZTogREkgd291bGQgYmUgYmV0dGVyIHdheSB0byBkbyB0aGlzIGJ1dCBubyBzeXN0ZW0gaW4gcGxhY2UgZm9yIERJXG4gICAgICAgdGhpcy5fc3RlcFJvdXRlclNlcnZpY2UgPSBuZXcgU3RlcFJvdXRlclNlcnZpY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkcyB0aGUgc3RlcCB3aXphcmQncyBjb3JlIGh0bWwgc3RydWN0dXJlIGludG8gdGhlIERPTSBhbmRcbiAgICogc2F2ZSByZWZlcmVuY2VzIHRvIHN0ZXAgd2l6YXJkJ3MgRE9NIGVsZW1lbnRzIGZvciBzdWJzZXF1ZW50IHVwZGF0ZXNcbiAgICovXG4gIHB1YmxpYyBzdGFydCgpIHtcblxuICAgIHRyeSB7XG5cbiAgICAgIHRoaXMuc2V0dXBTdGVwUm91dGVySW50ZXJuYWxzKCk7XG5cbiAgICAgIGlmKHRoaXMuX3N0ZXBSb3V0ZXJTZXJ2aWNlLnN0ZXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN0ZXBSb3V0ZXJBbmNob3JFbGVtZW50LmlubmVySFRNTCA9IEVycm9yTWVzc2FnZS5zdGVwX3JlZ2lzdGVyX25vbmVSZWdpc3RlcmVkO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGVwIGNvbnRlbnQgb3JjaGVzdHJhdGlvblxuICAgICAgY29uc3Qgc3RlcElkID0gdGhpcy5fc3RlcFJvdXRlclNlcnZpY2Uuc3RlcHMubGVuZ3RoID4gMCA/IHRoaXMuX3N0ZXBSb3V0ZXJTZXJ2aWNlLnN0ZXBzWzBdLmlkIDogXCJcIjtcbiAgICAgIGNvbnN0IHN0ZXAgPSB0aGlzLl9zdGVwUm91dGVyU2VydmljZS5maW5kU3RlcChzdGVwSWQpO1xuXG4gICAgICB0aGlzLnRyYW5zaXRpb25TdGVwKHN0ZXApO1xuXG4gICAgICB0aGlzLmJpbmRJbnRlcm5hbENsaWNrRXZlbnRzKCk7XG5cbiAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGljayBldmVudHMgZm9yIHdpemFyZCBpbnRlcm5hbCB1c2FnZSAobm90aGluZyB0byBkbyB3aXRoIGFueSBvZiB0aGUgc3RlcHMpXG4gICAqL1xuICBwcml2YXRlIGJpbmRJbnRlcm5hbENsaWNrRXZlbnRzKCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGVycm9yIG1lc3NhZ2UgZXZlbnRcbiAgICBsZXQgY2xlYXJFcnJvck1zZ0VsZW1lbnQgPSB0aGlzLnN0ZXBSb3V0ZXJXcmFwcGVyRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRoaXMuY2xlYXJFcnJvck1lc3NhZ2VDbGFzc05hbWUpO1xuXG4gICAgaWYgKGNsZWFyRXJyb3JNc2dFbGVtZW50WzBdKSB7XG4gICAgICBjbGVhckVycm9yTXNnRWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGVhckVycm9yTWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBQcmV2ZW50IFVJIGludGVyYWN0aW9uXG4gICAqL1xuICBwcml2YXRlIGJsb2NrVUkoKSB7XG4gICAgdGhpcy5zdGVwUm91dGVyV3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmxvYWRpbmdDbGFzc05hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93IFVJIGludGVyYWN0aW9uOyB1bmRvIHdoYXQgYmxvY2sgVUkgZG9lc1xuICAgKi9cbiAgcHJpdmF0ZSB1bmJsb2NrVUkoKSB7XG4gICAgdGhpcy5zdGVwUm91dGVyV3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmxvYWRpbmdDbGFzc05hbWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogRXJyb3IpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZpc3VhbCBxdWV1ZSB0aGF0IGxhc3Qgc3RlcCBpcyByZWFjaGVkLlxuICAgKiBOb3RlOiBmaXJzdCBzdGVwIGFuZCBsYXN0IHN0ZXAgYXJlIGJvdGggdHJlYXRlZCBhcyBlbmQgb2Ygcm9hZFxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVFbmRPZlJvYWQoKTogdm9pZCB7XG4gICAgdGhpcy5zdGVwUm91dGVyV3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmxhc3RTdGVwQ2xhc3NOYW1lKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zdGVwUm91dGVyV3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmxhc3RTdGVwQ2xhc3NOYW1lKTtcbiAgICB9LCA1MDApO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93RXJyb3JNZXNzYWdlKGVycm9yOiBFcnJvcik6IHZvaWQge1xuICAgIGlmICh0aGlzLmVycm9yTXNnRWxlbWVudCkge1xuICAgICAgdGhpcy5lcnJvck1zZ0VsZW1lbnQuaW5uZXJIVE1MID0gYFNvcnJ5LCBhbiBlcnJvciBoYXMgb2NjdXJlZDogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICB0aGlzLnN0ZXBSb3V0ZXJXcmFwcGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuc2hvd0Vycm9yQ2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIltTdGVwIFJvdXRlcl06IHNvcnJ5LCBhbiBlcnJvciBoYXMgb2NjdXJlZFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhckVycm9yTWVzc2FnZSgpOiB2b2lkIHtcbiAgICB0aGlzLnN0ZXBSb3V0ZXJXcmFwcGVyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2hvd0Vycm9yQ2xhc3NOYW1lKTtcbiAgICB0aGlzLmVycm9yTXNnRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHN0ZXAgcmVnaXN0cmF0aW9uXG4gICAqIEBwYXJhbSBzdGVwQ29uZmlnIGNvbmZpZ3VyYXRpb24gZGVzY3JpYmluZyBzdGVwIGluZm9ybWF0aW9uIHRvIHJlZ2lzdGVyXG4gICAqL1xuICBwdWJsaWMgcmVnaXN0ZXJTdGVwKHN0ZXBDb25maWc6IFN0ZXBJbmZvKTogUHJvbWlzZTxSZWdpc3RyYXRpb25SZXNwb25zZT4ge1xuXG4gICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZTxSZWdpc3RyYXRpb25SZXNwb25zZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICBsZXQgcmVzcG9uc2U6IFJlZ2lzdHJhdGlvblJlc3BvbnNlID0ge1xuICAgICAgICBpc1JlZ2lzdGVyZWQ6IHRydWUsXG4gICAgICAgIGVycm9yOiBuZXcgRXJyb3IoKVxuICAgICAgfTtcblxuICAgICAgdHJ5IHtcblxuICAgICAgICAvLyBFbnN1cmUgc3RlcCByZWdpc3RyYXRpb24gcHJlLXJlcXVpc2l0ZXMgYXJlIG1ldFxuICAgICAgICB0aGlzLnZhbGlkYXRlU3RlcFJlZ2lzdHJhdGlvbkNvbmZpZyhzdGVwQ29uZmlnKTtcblxuICAgICAgICAvLyBQcmVwYXJlIHN0ZXAgcmVnaXN0cmF0aW9uXG4gICAgICAgIGNvbnN0IG5ld1N0ZXA6IFN0ZXBJbmZvID0ge1xuICAgICAgICAgIGlkOiBzdGVwQ29uZmlnLmlkLFxuICAgICAgICAgIGNvbnRyb2xsZXI6IHN0ZXBDb25maWcuY29udHJvbGxlcixcbiAgICAgICAgICBjdHJsSW5zdGFuY2U6IG51bGwsXG4gICAgICAgICAgY2FsbGJhY2s6IHN0ZXBDb25maWcuY2FsbGJhY2ssXG4gICAgICAgICAgZGF0YTogc3RlcENvbmZpZ1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVnaXN0ZXIgdGhlIHN0ZXBcbiAgICAgICAgdGhpcy5fc3RlcFJvdXRlclNlcnZpY2UuYWRkU3RlcChuZXdTdGVwKTtcblxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcblxuICAgICAgfSBjYXRjaCAoZXgpIHtcblxuICAgICAgICByZXNwb25zZS5pc1JlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICAgICAgcmVzcG9uc2UuZXJyb3IgPSBleDtcblxuICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGV4KTtcblxuICAgICAgICByZWplY3QocmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgfSk7XG5cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdGhlIFVJIGZvciB0aGUgc3RlcFxuICAgKiBAcGFyYW0gc3RlcENvbnRlbnQgU3RlcCdzIFVJIChIVE1MKVxuICAgKi9cbiAgcHJpdmF0ZSBsb2FkU3RlcFZpZXcoc3RlcENvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc3RlcFdyYXBwZXJFbGVtZW50LmlubmVySFRNTCA9IHN0ZXBDb250ZW50O1xuICB9XG5cblxuICAvKipcbiAgICogSGVscHMgbmF2aWdhdGUgdGhlIHVzZXIgdG8gdGhlIGRlc3RpbmF0aW9uIHN0ZXBcbiAgICogQHBhcmFtIGRlc3RpbmF0aW9uU3RlcCBEZXN0aW5hdGlvbiBzdGVwXG4gICAqL1xuICBwcml2YXRlIHRyYW5zaXRpb25TdGVwKGRlc3RpbmF0aW9uU3RlcDogU3RlcEluZm8pOiB2b2lkIHtcblxuICAgIC8vIExvYWQgc3RlcCBjb250cm9sbGVyXG4gICAgZGVzdGluYXRpb25TdGVwLmN0cmxJbnN0YW5jZSA9IHRoaXMuZ2V0U3RlcEN0eChkZXN0aW5hdGlvblN0ZXApO1xuXG4gICAgLy8gVXBkYXRlIGN1cnJlbnQgc3RlcCBjb250ZXh0XG4gICAgdGhpcy5jdXJyZW50U3RlcCA9IGRlc3RpbmF0aW9uU3RlcDtcblxuICAgIC8vIExvYWQgZGVzdGluYXRpb24gc3RlcCB2aWV3IChVSSlcbiAgICB0aGlzLl9zdGVwUm91dGVyU2VydmljZS5nZXRTdGVwVmlldyhkZXN0aW5hdGlvblN0ZXApXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIC8vIEZvciB0cmFuc2l0aW9uIGFjdGlvbnMgcmVxdWVzdGVkIGluIHRoZSBzdGVwJ3MgVUksIGJpbmQgaXQgdG8gdGhlIHByb3BlciB3aXphcmQgY29udGV4dFxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSh0aGlzLnN0ZXBWaWV3QmluZGluZ1JlcGxhY2VtZW50LCBgJHt0aGlzLnN0ZXBSb3V0ZXJDb25maWcuc3RlcFJvdXRlckN0eH1gKTtcblxuICAgICAgICB0aGlzLmxvYWRTdGVwVmlldyhyZXN1bHQpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgIHRoaXMubG9hZFN0ZXBWaWV3KHJlc3VsdCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBuZXh0KCk6IHZvaWQge1xuXG4gICAgdGhpcy5ibG9ja1VJKCk7XG5cbiAgICBjb25zdCBzdGVwTmV4dENhbGxiYWNrID0gdGhpcy5jdXJyZW50U3RlcC5jdHJsSW5zdGFuY2VbdGhpcy5jdXJyZW50U3RlcC5jYWxsYmFjay5uZXh0QXN5bmNdKCkgYXMgUHJvbWlzZTxzdHJpbmc+O1xuXG4gICAgLy8gT25jZSBjdXJyZW50IHN0ZXAgaXMgZG9uZSB3aXRoIGl0J3Mgb3BlcmF0aW9ucyB0aGVuIHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxuICAgIHN0ZXBOZXh0Q2FsbGJhY2tcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBuZXh0IHN0ZXBcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb25TdGVwID0gdGhpcy5fc3RlcFJvdXRlclNlcnZpY2UuZmluZFN0ZXAodGhpcy5jdXJyZW50U3RlcC5pZCwgVHJhbnNpdGlvblR5cGUuTmV4dCk7XG5cbiAgICAgICAgIC8vIFRlbXAgbGFzdCBzdGVwIGhhbmRsZXJcbiAgICAgICAgLy8gVG9EbzogQWRkIG1vcmUgcmVwb3J0aW5nIGFyb3VuZCBsYXN0L2ZpcnN0IHN0ZXAgYW5kIGVuYWJsZS9kaXNhYmxlIHRyYW5zaXRpb24gYnV0dG9uc1xuICAgICAgICBpZighZGVzdGluYXRpb25TdGVwKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVFbmRPZlJvYWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGVwKGRlc3RpbmF0aW9uU3RlcCk7XG4gICAgICAgIH1cblxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgIHRoaXMubG9hZFN0ZXBWaWV3KHJlc3VsdCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICB0aGlzLnVuYmxvY2tVSSgpO1xuICAgICAgfSk7XG4gIH1cblxuICBwdWJsaWMgcHJldmlvdXMoKTogdm9pZCB7XG5cbiAgICB0aGlzLmJsb2NrVUkoKTtcblxuICAgIGNvbnN0IHN0ZXBQcmV2aW91c0NhbGxiYWNrID0gdGhpcy5jdXJyZW50U3RlcC5jdHJsSW5zdGFuY2VbdGhpcy5jdXJyZW50U3RlcC5jYWxsYmFjay5wcmV2aW91c0FzeW5jXSgpIGFzIFByb21pc2U8c3RyaW5nPjtcblxuICAgICAvLyBPbmNlIGN1cnJlbnQgc3RlcCBpcyBkb25lIHdpdGggaXQncyBvcGVyYXRpb25zIHRoZW4gdHJhbnNpdGlvbiB0byB0aGUgbmV4dCBzdGVwXG4gICAgc3RlcFByZXZpb3VzQ2FsbGJhY2tcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBwcmV2aW91cyBzdGVwXG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uU3RlcCA9IHRoaXMuX3N0ZXBSb3V0ZXJTZXJ2aWNlLmZpbmRTdGVwKHRoaXMuY3VycmVudFN0ZXAuaWQsIFRyYW5zaXRpb25UeXBlLlByZXZpb3VzKTtcblxuICAgICAgICAvLyBUZW1wIGxhc3Qgc3RlcCBoYW5kbGVyXG4gICAgICAgIC8vIFRvRG86IEFkZCBtb3JlIHJlcG9ydGluZyBhcm91bmQgbGFzdC9maXJzdCBzdGVwIGFuZCBlbmFibGUvZGlzYWJsZSB0cmFuc2l0aW9uIGJ1dHRvbnNcbiAgICAgICAgaWYoIWRlc3RpbmF0aW9uU3RlcCkge1xuICAgICAgICAgIHRoaXMuaGFuZGxlRW5kT2ZSb2FkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RlcChkZXN0aW5hdGlvblN0ZXApO1xuICAgICAgICB9XG5cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlc3VsdCkgPT4ge1xuICAgICAgICB0aGlzLmxvYWRTdGVwVmlldyhyZXN1bHQpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgdGhpcy51bmJsb2NrVUkoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHNraXAoKTogdm9pZCB7XG5cbiAgICB0aGlzLmJsb2NrVUkoKTtcblxuICAgIGNvbnN0IHN0ZXBTa2lwQ2FsbGJhY2sgPSB0aGlzLmN1cnJlbnRTdGVwLmN0cmxJbnN0YW5jZVt0aGlzLmN1cnJlbnRTdGVwLmNhbGxiYWNrLnNraXBBc3luY10oKSBhcyBQcm9taXNlPHN0cmluZz47XG5cbiAgICAgLy8gT25jZSBjdXJyZW50IHN0ZXAgaXMgZG9uZSB3aXRoIGl0J3Mgb3BlcmF0aW9ucyB0aGVuIHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxuICAgIHN0ZXBTa2lwQ2FsbGJhY2tcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBuZXh0IHN0ZXBcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb25TdGVwID0gdGhpcy5fc3RlcFJvdXRlclNlcnZpY2UuZmluZFN0ZXAodGhpcy5jdXJyZW50U3RlcC5pZCwgVHJhbnNpdGlvblR5cGUuU2tpcCk7XG5cbiAgICAgICAgIC8vIFRlbXAgbGFzdCBzdGVwIGhhbmRsZXJcbiAgICAgICAgLy8gVG9EbzogQWRkIG1vcmUgcmVwb3J0aW5nIGFyb3VuZCBsYXN0L2ZpcnN0IHN0ZXAgYW5kIGVuYWJsZS9kaXNhYmxlIHRyYW5zaXRpb24gYnV0dG9uc1xuICAgICAgICBpZighZGVzdGluYXRpb25TdGVwKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVFbmRPZlJvYWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGVwKGRlc3RpbmF0aW9uU3RlcCk7XG4gICAgICAgIH1cblxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgIHRoaXMubG9hZFN0ZXBWaWV3KHJlc3VsdCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICB0aGlzLnVuYmxvY2tVSSgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyBIZWxwZXJzXG5cbiAgLyoqXG4gICAqIENvbXBvc2Ugc3RlcCByb3V0ZXIgVUkgYW5kIGdldCBob2xkIG9mIG90aGVyIGVsZW1lbnRzIGZvciBsYXRlciB1c2VcbiAgICovXG4gIHByaXZhdGUgc2V0dXBTdGVwUm91dGVySW50ZXJuYWxzKCk6IHZvaWQge1xuXG4gICAgLy8gTG9va3VwIHRoZSBhbmNob3IgcG9pbnRcbiAgICB0aGlzLnN0ZXBSb3V0ZXJBbmNob3JFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGVwUm91dGVyQ29uZmlnLnN0ZXBSb3V0ZXJBbmNob3JJZCkgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBpZighdGhpcy5zdGVwUm91dGVyQW5jaG9yRWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVycm9yTWVzc2FnZS5zdGVwUm91dGVyX2FuY2hvcl93aXphcmRFbGVtZW50Tm90Rm91bmQucmVwbGFjZShcIlwiLCB0aGlzLnN0ZXBSb3V0ZXJDb25maWcuc3RlcFJvdXRlckFuY2hvcklkKSk7XG4gICAgfVxuXG4gICAgLy8gQ29tcG9zZSBzdGVwIHdpemFyZCBpbml0aWFsIEh0bWwgc3RydWN0dXJlXG4gICAgbGV0IHN0ZXBSb3V0ZXJIdG1sID0gdGhpcy5zdGVwUm91dGVyTWFzdGVyVGVtcGxhdGUucmVwbGFjZShcInt7c3RlcFJvdXRlck1hc3RlclN0eWxlfX1cIiwgdGhpcy5zdGVwUm91dGVyTWFzdGVyU3R5bGUpO1xuXG4gICAgLy8gSW5qZWN0IHN0ZXAgd2l6YXJkIEh0bWwgc3RydWN0dXJlIGludG8gdGhlIGFuY2hvclxuICAgIHRoaXMuc3RlcFJvdXRlckFuY2hvckVsZW1lbnQuaW5uZXJIVE1MID0gc3RlcFJvdXRlckh0bWw7XG5cbiAgICAvLyBTYXZlIHJlZmVyZW5jZSB0byBwcm9wZXIgaW5uZXIgYW5jaG9ycyBmb3IgZnV0dXJlIG1hbmlwdWxhdGlvblxuICAgIHRoaXMuc3RlcFJvdXRlcldyYXBwZXJFbGVtZW50ID0gdGhpcy5zdGVwUm91dGVyQW5jaG9yRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRoaXMuc3RlcFJvdXRlcldyYXBwZXJDbGFzc05hbWUpWzBdO1xuICAgIHRoaXMuc3RlcFdyYXBwZXJFbGVtZW50ID0gdGhpcy5zdGVwUm91dGVyQW5jaG9yRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRoaXMuc3RlcFdyYXBwZXJDbGFzc05hbWUpWzBdO1xuICAgIHRoaXMuZXJyb3JNc2dFbGVtZW50ID0gdGhpcy5zdGVwUm91dGVyQW5jaG9yRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRoaXMuZXJyb3JNZXNzYWdlQ2xhc3NOYW1lKVswXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgb2YgcnVsZXMgdG8gc2F0aXNmeSB0byBlbnN1cmUgd2l6YXJkIGNhbiB3b3JrIGNvcnJlY3RseVxuICAgKiBAcGFyYW0gcm91dGVyQ29uZmlnIHN0ZXAgd2l6YXJkJ3MgY29yZSBzZXR0aW5nc1xuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZVN0ZXBSb3V0ZXJDb25maWcocm91dGVyQ29uZmlnOiBTdGVwUm91dGVyQ29uZmlnKTogYm9vbGVhbiB7XG4gICAgLy8gbm90ZTogU2luY2Ugd2UgY2FuJ3QgcmVseSBvbiBwcmVzZW5jZSBvZiBhbiBhbmNob3JJZCBhdCB0aGlzIHN0YWdlOyB0aGVyZWZvcmUsXG4gICAgLy8gY29uc29sZSB3aW5kb3cgc2VlbXMgbGlrZSByZWFzb25hYmxlIGFsdGVybmF0aXZlIHRvIHNob3cgYW4gZXJyb3JzIHZlcnN1cyBjcmFzaGluZyB0aGUgcGFnZVxuXG4gICAgbGV0IHJlc3BvbnNlID0gdHJ1ZTtcblxuICAgIC8vIFJ1bGUgIzA6IGVuc3VyZSB3aXphcmQgY29uZmlnIGlzIHByb3ZpZGVkXG4gICAgaWYgKCFyb3V0ZXJDb25maWcpIHtcbiAgICAgIHJlc3BvbnNlID0gZmFsc2U7XG4gICAgICBjb25zb2xlLmVycm9yKEVycm9yTWVzc2FnZS5zdGVwUm91dGVyX2NvbmZpZ191bmRlZmluZWQpO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgLy8gUnVsZSAjMTogZW5zdXJlIHdlIGhhdmUgdGhlIERPTSBhbmNob3Igd2hlcmUgd2Ugd2lsbCBiZSBpbmplY3RpbmcgdGhlIFVJXG4gICAgaWYgKCFyb3V0ZXJDb25maWcuc3RlcFJvdXRlckFuY2hvcklkIHx8IHJvdXRlckNvbmZpZy5zdGVwUm91dGVyQW5jaG9ySWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXNwb25zZSA9IGZhbHNlO1xuICAgICAgY29uc29sZS5lcnJvcihFcnJvck1lc3NhZ2Uuc3RlcFJvdXRlcl9jb25maWdfYW5jaG9ySWROb3RGb3VuZCk7XG5cbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvLyBSdWxlICMyOiBlbnN1cmUgd2UndmUgdGhlIGNvbnRleHQgaG9sZGluZyByZWZlcmVuY2UgdG8gdGhpcyB3aXphcmQncyBpbnN0YW5jZVxuICAgIGlmICghcm91dGVyQ29uZmlnLnN0ZXBSb3V0ZXJDdHggfHwgcm91dGVyQ29uZmlnLnN0ZXBSb3V0ZXJDdHgubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXNwb25zZSA9IGZhbHNlO1xuICAgICAgY29uc29sZS5lcnJvcihFcnJvck1lc3NhZ2Uuc3RlcFJvdXRlcl9jb25maWdfY3R4UHJvcE1pc3NpbmcpO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBvZiBydWxlcyB0byBzYXRpc2Z5IHRvIGVuc3VyZSB3aXphcmQgY2FuIHBlcmZvcm0gaXQncyBhY3Rpdml0aWVzXG4gICAqIEBwYXJhbSBzdGVwQ29uZmlnIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzdGVwIHRvIHJlZ2lzdGVyXG4gICAqL1xuICBwcml2YXRlIHZhbGlkYXRlU3RlcFJlZ2lzdHJhdGlvbkNvbmZpZyhzdGVwQ29uZmlnOiBTdGVwSW5mbyk6IGJvb2xlYW4ge1xuXG4gICAgLy8gUnVsZSAjMTogZW5zdXJlIHByaW1hcnkga2V5IGZvciB0aGUgc3RlcCBpcyBwcm92aWRlZFxuICAgIGlmICghc3RlcENvbmZpZy5pZCB8fCBzdGVwQ29uZmlnLmlkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVycm9yTWVzc2FnZS5zdGVwX3JlZ2lzdGVyX3N0ZXBJZE1pc3NpbmcpO1xuICAgIH1cblxuICAgIC8vIFJ1bGUgIzI6IGVuc3VyZSAnaWQnIGlzIHVuaXF1ZSAoaGFzbid0IGJlZW4gcmVnaXN0ZXJlZCBhbHJlYWR5KVxuICAgIGNvbnN0IHN0ZXAgPSB0aGlzLl9zdGVwUm91dGVyU2VydmljZS5zdGVwcy5maWx0ZXIoZSA9PiBlLmlkID09PSBzdGVwQ29uZmlnLmlkKTtcbiAgICBpZiAoc3RlcC5sZW5ndGggIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFcnJvck1lc3NhZ2Uuc3RlcF9yZWdpc3Rlcl9kdXBsaWNhdGVJZC5yZXBsYWNlKFwie3tzdGVwSWR9fVwiLCBzdGVwQ29uZmlnLmlkKSk7XG4gICAgfVxuXG4gICAgLy8gUnVsZSAjMzogZW5zdXJlIHN0ZXAncyBjb250cm9sbGVyIGhhcyBiZWVuIHByb3ZpZGVkXG4gICAgaWYgKCFzdGVwQ29uZmlnLmNvbnRyb2xsZXIgfHwgdHlwZW9mIChzdGVwQ29uZmlnLmNvbnRyb2xsZXIpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRXJyb3JNZXNzYWdlLnN0ZXBfcmVnaXN0ZXJfY29udHJvbGxlcmRNaXNzaW5nKTtcbiAgICB9XG5cbiAgICAvLyBSdWxlICM0OiBlbnN1cmUgc3RlcCdzIHZpZXcgaXMgYXZhaWxhYmxlXG4gICAgaWYgKCFzdGVwQ29uZmlnLmNhbGxiYWNrLnZpZXdBc3luYykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVycm9yTWVzc2FnZS5zdGVwX3JlZ2lzdGVyX3N0ZXBWaWV3TWlzc2luZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgKiBHZXQgb3IgY3JlYXRlIGNvbnRleHQgZm9yIHRoZSBzcGVjaWZpZWQgc3RlcFxuICAqIEBwYXJhbSBzdGVwIFN0ZXAgd2hvc2UgY29udGV4dCB0byBnZXQvY3JlYXRlXG4gICovXG4gIHByaXZhdGUgZ2V0U3RlcEN0eChzdGVwOiBTdGVwSW5mbyk6IEZ1bmN0aW9uIHtcblxuICAgIGxldCByZXNwb25zZTogRnVuY3Rpb247XG5cbiAgICBpZiAoc3RlcC5jdHJsSW5zdGFuY2UpIHtcbiAgICAgIHJlc3BvbnNlID0gc3RlcC5jdHJsSW5zdGFuY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3BvbnNlID0gbmV3IHN0ZXAuY29udHJvbGxlcigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7QUFLQTtBQUVBO0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBK0dBO0FBN0dBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1FQTtBQUVBOzs7Ozs7OztBQVNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2ZUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/stepRouter/controller/stepRouter.ts\n");

/***/ }),

/***/ "./src/stepRouter/enums/transitionType.ts":
/*!************************************************!*\
  !*** ./src/stepRouter/enums/transitionType.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents the many ways user can navigate steps available\n */\nvar TransitionType;\n(function (TransitionType) {\n    TransitionType[TransitionType[\"Next\"] = 0] = \"Next\";\n    TransitionType[TransitionType[\"Previous\"] = 1] = \"Previous\";\n    TransitionType[TransitionType[\"Skip\"] = 2] = \"Skip\";\n})(TransitionType = exports.TransitionType || (exports.TransitionType = {}));\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RlcFJvdXRlci9lbnVtcy90cmFuc2l0aW9uVHlwZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9zdGVwUm91dGVyL2VudW1zL3RyYW5zaXRpb25UeXBlLnRzP2I0ODYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBtYW55IHdheXMgdXNlciBjYW4gbmF2aWdhdGUgc3RlcHMgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBlbnVtIFRyYW5zaXRpb25UeXBlIHtcbiAgTmV4dCxcbiAgUHJldmlvdXMsXG4gIFNraXBcbiB9O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/stepRouter/enums/transitionType.ts\n");

/***/ }),

/***/ "./src/stepRouter/services/stepRouterService.ts":
/*!******************************************************!*\
  !*** ./src/stepRouter/services/stepRouterService.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst transitionType_1 = __webpack_require__(/*! ../enums/transitionType */ \"./src/stepRouter/enums/transitionType.ts\");\nconst errorMessage_1 = __webpack_require__(/*! ../constants/errorMessage */ \"./src/stepRouter/constants/errorMessage.ts\");\n/**\n * Service to manage the core functions like tracking steps, help fetch step UI etc.\n */\nclass StepRouterService {\n    constructor() {\n        this._steps = [];\n    }\n    /**\n     * Registered steps\n     */\n    get steps() {\n        return this._steps;\n    }\n    /**\n     * Help register the step\n     * @param step step to register\n     */\n    addStep(step) {\n        this._steps.push(step);\n    }\n    /**\n     * Finds the registered step with respect to the transition type where applicable\n     * @param stepConfig information about the step to register\n     */\n    findStep(stepId, transitionType) {\n        let response;\n        // Lookup the step location\n        let resultIndex = this._steps.map(s => s.id).indexOf(stepId);\n        if (resultIndex !== -1) {\n            switch (transitionType) {\n                case transitionType_1.TransitionType.Next:\n                case transitionType_1.TransitionType.Skip:\n                    resultIndex = resultIndex + 1;\n                    break;\n                case transitionType_1.TransitionType.Previous:\n                    resultIndex = resultIndex - 1;\n                    break;\n            }\n            response = this._steps[resultIndex] || null;\n        }\n        else {\n            throw new Error(errorMessage_1.ErrorMessage.step_find_notFound.replace(\"{{stepId}}\", stepId));\n        }\n        return response;\n    }\n    /**\n     * Get UI (HTML) for the step from the registered callback\n     * @param step step whose UI to fetch\n     */\n    getStepView(step) {\n        // Pre-requisite #1\n        if (typeof (step.ctrlInstance[step.callback.viewAsync]) !== \"function\") {\n            throw new Error(errorMessage_1.ErrorMessage.step_view_callbackNotFunction);\n        }\n        const promise = new Promise((resolve, reject) => {\n            step.ctrlInstance[step.callback.viewAsync]()\n                .then((result) => {\n                resolve(result);\n            })\n                .catch((result) => {\n                reject(result);\n            });\n        });\n        return promise;\n    }\n}\nexports.StepRouterService = StepRouterService;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RlcFJvdXRlci9zZXJ2aWNlcy9zdGVwUm91dGVyU2VydmljZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9zdGVwUm91dGVyL3NlcnZpY2VzL3N0ZXBSb3V0ZXJTZXJ2aWNlLnRzPzk2MTEiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBTdGVwUm91dGVyQWN0aW9ucyB9IGZyb20gJy4uL2ludGVyZmFjZXMvc3RlcFJvdXRlckFjdGlvbnMnO1xuaW1wb3J0IHsgU3RlcEluZm8gfSBmcm9tICcuLi9pbnRlcmZhY2VzL3N0ZXBJbmZvJztcbmltcG9ydCB7IFJlZ2lzdHJhdGlvblJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zdGVwUmVnaXN0ZXJSZXNwb25zZSc7XG5cbmltcG9ydCB7IFRyYW5zaXRpb25UeXBlIH0gZnJvbSAnLi4vZW51bXMvdHJhbnNpdGlvblR5cGUnO1xuXG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tICcuLi9jb25zdGFudHMvZXJyb3JNZXNzYWdlJztcblxuLyoqXG4gKiBTZXJ2aWNlIHRvIG1hbmFnZSB0aGUgY29yZSBmdW5jdGlvbnMgbGlrZSB0cmFja2luZyBzdGVwcywgaGVscCBmZXRjaCBzdGVwIFVJIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0ZXBSb3V0ZXJTZXJ2aWNlIGltcGxlbWVudHMgU3RlcFJvdXRlckFjdGlvbnMge1xuXG4gIHByaXZhdGUgX3N0ZXBzOiBBcnJheTxTdGVwSW5mbz47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc3RlcHMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcmVkIHN0ZXBzXG4gICAqL1xuICBnZXQgc3RlcHMoKTogQXJyYXk8U3RlcEluZm8+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RlcHM7XG4gIH1cblxuICAvKipcbiAgICogSGVscCByZWdpc3RlciB0aGUgc3RlcFxuICAgKiBAcGFyYW0gc3RlcCBzdGVwIHRvIHJlZ2lzdGVyXG4gICAqL1xuICBwdWJsaWMgYWRkU3RlcChzdGVwOiBTdGVwSW5mbyk6IHZvaWQge1xuICAgIHRoaXMuX3N0ZXBzLnB1c2goc3RlcCk7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIHJlZ2lzdGVyZWQgc3RlcCB3aXRoIHJlc3BlY3QgdG8gdGhlIHRyYW5zaXRpb24gdHlwZSB3aGVyZSBhcHBsaWNhYmxlXG4gICAqIEBwYXJhbSBzdGVwQ29uZmlnIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzdGVwIHRvIHJlZ2lzdGVyXG4gICAqL1xuICBwdWJsaWMgZmluZFN0ZXAoc3RlcElkOiBzdHJpbmcsIHRyYW5zaXRpb25UeXBlPzogVHJhbnNpdGlvblR5cGUpOiBTdGVwSW5mbyB7XG4gICAgbGV0IHJlc3BvbnNlOiBTdGVwSW5mbztcblxuICAgIC8vIExvb2t1cCB0aGUgc3RlcCBsb2NhdGlvblxuICAgIGxldCByZXN1bHRJbmRleCA9IHRoaXMuX3N0ZXBzLm1hcChzID0+IHMuaWQpLmluZGV4T2Yoc3RlcElkKTtcblxuICAgIGlmIChyZXN1bHRJbmRleCAhPT0gLTEpIHtcblxuICAgICAgc3dpdGNoICh0cmFuc2l0aW9uVHlwZSkge1xuICAgICAgICBjYXNlIFRyYW5zaXRpb25UeXBlLk5leHQ6XG4gICAgICAgIGNhc2UgVHJhbnNpdGlvblR5cGUuU2tpcDpcbiAgICAgICAgICByZXN1bHRJbmRleCA9IHJlc3VsdEluZGV4ICsgMTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFRyYW5zaXRpb25UeXBlLlByZXZpb3VzOlxuICAgICAgICAgIHJlc3VsdEluZGV4ID0gcmVzdWx0SW5kZXggLSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZXNwb25zZSA9IHRoaXMuX3N0ZXBzW3Jlc3VsdEluZGV4XSB8fCBudWxsO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihFcnJvck1lc3NhZ2Uuc3RlcF9maW5kX25vdEZvdW5kLnJlcGxhY2UoXCJ7e3N0ZXBJZH19XCIsIHN0ZXBJZCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgVUkgKEhUTUwpIGZvciB0aGUgc3RlcCBmcm9tIHRoZSByZWdpc3RlcmVkIGNhbGxiYWNrXG4gICAqIEBwYXJhbSBzdGVwIHN0ZXAgd2hvc2UgVUkgdG8gZmV0Y2hcbiAgICovXG4gIGdldFN0ZXBWaWV3KHN0ZXA6IFN0ZXBJbmZvKTogUHJvbWlzZTxzdHJpbmc+IHtcblxuICAgIC8vIFByZS1yZXF1aXNpdGUgIzFcbiAgICBpZiAodHlwZW9mKHN0ZXAuY3RybEluc3RhbmNlW3N0ZXAuY2FsbGJhY2sudmlld0FzeW5jXSkgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVycm9yTWVzc2FnZS5zdGVwX3ZpZXdfY2FsbGJhY2tOb3RGdW5jdGlvbik7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICBzdGVwLmN0cmxJbnN0YW5jZVtzdGVwLmNhbGxiYWNrLnZpZXdBc3luY10oKVxuICAgICAgICAudGhlbigocmVzdWx0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgocmVzdWx0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICByZWplY3QocmVzdWx0KTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBS0E7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFoRkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/stepRouter/services/stepRouterService.ts\n");

/***/ })

/******/ });
});